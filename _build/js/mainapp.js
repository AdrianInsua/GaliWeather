!function(){function e(e,n,a,l,i){function r(e){var n=new Date;return n.setDate(n.getDate()+e)}function o(e){for(var n=[],a=0;a<e;a++)n=n.concat(r(a));return n}var t=this;t.loadingResults=!1,t.landingPage=!0,t.showSingle=!1,t.provincesFilter=[6357300,6359189,6359872,6360237],t.daysFilter=[],t.results=[],t.singleResult=void 0,t.cityImg={6357300:{src:"images/cor.png",loading:!0},6359189:{src:"images/lugo.png",loading:!0},6359872:{src:"images/ourense.png",loading:!0},6360237:{src:"images/pont.png",loading:!0}};for(var s in t.cityImg)i.preloadImages([t.cityImg[s].src],s).then(function(e){console.log(e),t.cityImg[e.id].loading=!1,console.info(t.cityImg)},function(e){console.error("Image Failed",e),console.info("Preload Failure")},function(e,n){console.info("Percent loaded:",e.percent," ",e.id)});var g={COR:6357300,LUG:6359189,OUR:6359872,PONT:6360237},c={1:1,2:2,3:3,4:4};t.vegObjs=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"}],t.menuBarOptions={province:{id:1,placeholder:"SEL_PROV",label:"Prov.",variable:"",values:g},day:{id:2,placeholder:"SEL_DAY",label:"Pred.",variable:"",values:c}},t.demark=function(){t.menuBarOptions.province.variable=""},t.updateSingleResult=function(e){var n=l.map(e,function(e){delete e.dt;var n=l.map(e,function(e,n){var a={};return a.data=e,a.name=n,a});return n});console.log(n),t.showSingle=!0,t.singleResult=n},t.search=function(){try{t.results=[],t.landingPage&&(t.loadingResults=!0),t.landingPage=!1,t.menuBarOptions.province.variable.length>0&&(t.provincesFilter=t.menuBarOptions.province.variable),""!==t.menuBarOptions.day.variable?t.daysFilter=o(t.menuBarOptions.day.variable):t.daysFilter=o(4);for(var n in t.provincesFilter)e.query("GET",t.provincesFilter[n]).then(function(e){0===t.results.length&&(t.loadingResults=!1),t.provincesFilter.length>1?(t.showSingle=!1,t.results=t.results.concat(e)):(t.updateSingleResult(e.data.list),console.log(t.singleResult))})}catch(a){console.log(a),t.landingPage=!0,t.loadingResults=!1,t.resuslt=[]}},t.goBack=function(){t.showSingle?(t.landingPage=0===t.results.length,t.showSingle=!1):(t.landingPage=!0,t.results=[],t.singleResult=void 0)}}angular.module("galiweather").controller("MainController",["QueryService","$timeout","$route","_","preloader",e])}();